<h1><%= t(".title") %></h1>

<% if current_user %>
  <%= turbo_frame_tag "new_product" do %>
    <%= link_to t(".new_product"), new_product_path %>
  <% end %>
<% end %>

<div id="products">
  <% cache "products" do %>
    <% @products.each do |product| %>
      <% cache product do %>
        <%= turbo_frame_tag dom_id(product) do %>
          <div>
            <%= link_to product.name, product_path(product.id) %>
            <% if current_user %>
              <%= link_to t(".edit"), edit_product_path(product) %>
              <%= link_to t(".delete"), product_path(product), data: { turbo_method: :delete, turbo_confirm: t("confirm_delete") } %>
            <% end %>
          </div>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
</div>
